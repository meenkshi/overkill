{% comment %}
    Accepts:
    - product: {Object} Product Liquid object (required)
    - hide_when_equal {Boolean} Parameter to hide bpi-price if current price is equal to bpi-price (required)
    Usage:
    {% render 'bpi-price', product: product, hide_when_equal: false %}

    Please note that this file is automatically generated and can be overwritten, for customization please create a copy.
{% endcomment %}

{%- liquid
  assign target = product.selected_or_first_available_variant
  assign compare_at_price = target.compare_at_price | plus: 0
  assign bpi_price = target.metafields.bpi.price | plus: 0
  assign money_price = bpi_price | money | strip_html
  assign show_bpi_price = true
  if target.price == bpi_price and hide_when_equal
    assign show_bpi_price = false
  endif
-%}

{%- if compare_at_price > target.price and bpi_price != null and bpi_price != 0 and bpi_price != 'N/A' and show_bpi_price -%}
  {%- style -%}
  .bpi-price {
    font-size: small;
    display: block;
    width: 100%;
    text-align: inherit;
  }
  {%- endstyle -%}

  <span class="bpi-price">{{ 'bpi.content' | t: price: money_price }}</span>
{%- endif -%}
